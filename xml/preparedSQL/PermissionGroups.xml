<talnet type="preparedSQL">
	<preparedSql name="getAllPermissionGroupsAdmin">
		<description>returns a list of all permission groups</description>
		<arguments>
		</arguments>
		<columns>
			<column name="PERMISSION_NAME">the permission group name</column>
			<column name="PERMISSIONGROUP_DESCRIPTION">the permission group description</column>
			<column name="GROUPADMIN_USERNAME">the group admin username</column>
		</columns>
		<query>SELECT PERMISSION_GROUPS.PERMISSION_NAME,PERMISSION_GROUPS.PERMISSIONGROUP_DESCRIPTION, (SELECT USERNAME FROM USERS WHERE USER_ID = PERMISSION_GROUPS.PERMISSION_GROUP_ADMIN) AS GROUPADMIN_USERNAME FROM PERMISSION_GROUPS
WHERE 1</query>
	</preparedSql>
	<preparedSql name="getPermissionGroupInfoByName">
		<description>returns all information of a given permission group</description>
		<arguments>
			<argument id="1">the requested permission group name</argument>
		</arguments>
		<columns>
			<column name="PERMISSIONGROUP_ID">the permission group id</column>
			<column name="PERMISSION_NAME">the permission group name</column>
			<column name="PERMISSIONGROUP_DESCRIPTION">the permission group description</column>
			<column name="PERMISSION_GROUP_ADMIN">the permission group admin user id</column>
			<column name="USERNAME">the permission group admin username</column>
		</columns>
		<query>SELECT PERMISSION_GROUPS.*, USERS.USERNAME FROM PERMISSION_GROUPS
LEFT JOIN USERS ON USERS.USER_ID = PERMISSION_GROUPS.PERMISSION_GROUP_ADMIN
WHERE PERMISSION_NAME = ?</query>
	</preparedSql>
	<preparedSql name="getPermissionGroupInfoByNameAndAdminname">
		<description>returns a record of permission group with a given group admin username</description>
		<arguments>
			<argument id="1">the permission group name</argument>
			<argument id="2">the group admin username</argument>
		</arguments>
		<columns>
			<column name="PERMISSIONGROUP_ID">the permission group id</column>
			<column name="PERMISSION_NAME">the permission group name</column>
			<column name="PERMISSIONGROUP_DESCRIPTION">the permission group description</column>
			<column name="PERMISSION_GROUP_ADMIN">the permission group admin user id</column>
			<column name="USERNAME">the permission group admin username</column>
		</columns>
		<query>SELECT PERMISSION_GROUPS.*, USERS.USERNAME FROM PERMISSION_GROUPS
LEFT JOIN USERS ON USERS.USER_ID = PERMISSION_GROUPS.PERMISSION_GROUP_ADMIN
WHERE PERMISSION_NAME = ? AND USERS.USERNAME = ?</query>
	</preparedSql>
	<preparedSql name="SetPermissionGroupAdmin">
		<description>sets a new permission group admin user</description>
		<arguments>
			<argument id="1">the user name of the new admin</argument>
			<argument id="2">the permission group name</argument>
		</arguments>
		<query>UPDATE PERMISSION_GROUPS SET PERMISSION_GROUP_ADMIN = (SELECT USER_ID FROM USERS WHERE USERNAME = ?) WHERE PERMISSION_NAME = ?</query>
	</preparedSql>
	<preparedSql name="AddPermissionGroup">
		<description>adds a new permission group</description>
		<arguments>
			<argument id="1">the new permission group name</argument>
			<argument id="2">the new permission group description</argument>
			<argument id="3">the new permission group admin username</argument>
		</arguments>
		<query>INSERT INTO PERMISSION_GROUPS (PERMISSION_NAME,PERMISSIONGROUP_DESCRIPTION,PERMISSION_GROUP_ADMIN)
VALUES (?,?,(SELECT USER_ID FROM USERS WHERE USERS.USERNAME = ?));</query>
	</preparedSql>
	<preparedSql name="DeletePermission">
		<description>deletes an existing permission group</description>
		<arguments>
			<argument id="1">the permission group name</argument>
		</arguments>
		<query>DELETE FROM PERMISSION_GROUPS WHERE PERMISSION_NAME = ?</query>
	</preparedSql>
</talnet>